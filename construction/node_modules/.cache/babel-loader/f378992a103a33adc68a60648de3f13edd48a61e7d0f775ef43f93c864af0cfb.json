{"ast":null,"code":"import _slicedToArray from\"/Users/jackchen/Downloads/GitHub/construction-frontend/construction/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function Logout(){var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),errorMsg=_useState2[0],setErrorMsg=_useState2[1];var bearer='Bearer '+localStorage.getItem('token');fetch(\"http://127.0.0.1:8000/api/logout/\",{method:'post',headers:new Headers({'Authorization':bearer})}).then(function(response){if(response.status===200){response.json().then(function(result){localStorage.setItem(\"token\",result.token);localStorage.setItem(\"update_token\",result.update_token);});navigate(\"/\");}else{setErrorMsg(\"Something went wrong during logout!\");}});return/*#__PURE__*/_jsx(\"div\",{className:\"\",style:{color:\"red\",fontWeight:\"bold\"},children:errorMsg});}","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","Logout","navigate","_useState","_useState2","_slicedToArray","errorMsg","setErrorMsg","bearer","localStorage","getItem","fetch","method","headers","Headers","then","response","status","json","result","setItem","token","update_token","className","style","color","fontWeight","children"],"sources":["/Users/jackchen/Downloads/GitHub/construction-frontend/construction/src/views/LogoutView.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function Logout(){\n    const navigate = useNavigate();\n    const [errorMsg, setErrorMsg] = useState(null);\n    const bearer = 'Bearer ' + localStorage.getItem('token')\n\n    fetch(\"http://127.0.0.1:8000/api/logout/\",{ \n        method: 'post', \n        headers: new Headers({\n            'Authorization': bearer, \n        })\n    }).then((response) => {\n        if (response.status === 200){\n          response.json().then(\n              (result) => {\n                  localStorage.setItem(\"token\",result.token)\n                  localStorage.setItem(\"update_token\",result.update_token)\n              });\n          navigate(\"/\")\n      } else{\n          setErrorMsg(\"Something went wrong during logout!\");\n        }\n    })\n\n    return(\n        <div className=\"\" style={{ color: \"red\", fontWeight: \"bold\" }}>\n                  {errorMsg}\n                </div>\n    )\n}"],"mappings":"yJAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE/C,cAAe,SAAS,CAAAC,MAAMA,CAAA,CAAE,CAC5B,GAAM,CAAAC,QAAQ,CAAGJ,WAAW,EAAE,CAC9B,IAAAK,SAAA,CAAgCN,QAAQ,CAAC,IAAI,CAAC,CAAAO,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAvCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,GAAM,CAAAI,MAAM,CAAG,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAExDC,KAAK,CAAC,mCAAmC,CAAC,CACtCC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,GAAI,CAAAC,OAAO,CAAC,CACjB,eAAe,CAAEN,MACrB,CAAC,CACL,CAAC,CAAC,CAACO,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClB,GAAIA,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAC,CAC1BD,QAAQ,CAACE,IAAI,EAAE,CAACH,IAAI,CAChB,SAACI,MAAM,CAAK,CACRV,YAAY,CAACW,OAAO,CAAC,OAAO,CAACD,MAAM,CAACE,KAAK,CAAC,CAC1CZ,YAAY,CAACW,OAAO,CAAC,cAAc,CAACD,MAAM,CAACG,YAAY,CAAC,CAC5D,CAAC,CAAC,CACNpB,QAAQ,CAAC,GAAG,CAAC,CACjB,CAAC,IAAK,CACFK,WAAW,CAAC,qCAAqC,CAAC,CACpD,CACJ,CAAC,CAAC,CAEF,mBACIP,IAAA,QAAKuB,SAAS,CAAC,EAAE,CAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAK,CAAEC,UAAU,CAAE,MAAO,CAAE,CAAAC,QAAA,CACnDrB,QAAQ,EACL,CAEtB"},"metadata":{},"sourceType":"module","externalDependencies":[]}