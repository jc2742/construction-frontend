{"ast":null,"code":"import _slicedToArray from\"/Users/jackchen/Downloads/GitHub/construction-frontend/construction/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Button,Col,Container,Row,Form}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),errorMsg=_useState6[0],setErrorMsg=_useState6[1];function sendLoginRequest(){setErrorMsg(\"\");var reqBody={\"email\":username,\"password\":password};fetch(\"http://127.0.0.1:8000/api/login/\",{headers:{\"Content-Type\":\"application/json\"},method:\"post\",body:JSON.stringify(reqBody)}).then(function(response){if(response.status===200){response.json().then(function(result){localStorage.setItem(\"token\",result.token);localStorage.setItem(\"update_token\",result.update_token);});navigate(\"/\");}else if(response.status===401||response.status===403){setErrorMsg(\"Invalid username or password\");}else{setErrorMsg(\"Something went wrong, try again later or reach out to jchen72503@gmail.com\");}});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{className:\"justify-content-center mt-5\",children:/*#__PURE__*/_jsx(Col,{md:\"8\",lg:\"6\",children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"username\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"fs-4\",children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",size:\"lg\",placeholder:\"joe@gmail.com\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})]})})}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{md:\"8\",lg:\"6\",children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"fs-4\",children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",size:\"lg\",placeholder:\"Type in your password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]})})}),errorMsg?/*#__PURE__*/_jsx(Row,{className:\"justify-content-center mb-4\",children:/*#__PURE__*/_jsx(Col,{md:\"8\",lg:\"6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"\",style:{color:\"red\",fontWeight:\"bold\"},children:errorMsg})})}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsxs(Col,{md:\"8\",lg:\"6\",className:\"mt-2 d-flex flex-column gap-5 flex-md-row justify-content-md-between\",children:[/*#__PURE__*/_jsx(Button,{id:\"submit\",type:\"button\",size:\"lg\",onClick:function onClick(){return sendLoginRequest();},children:\"Login\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",type:\"button\",size:\"lg\",onClick:function onClick(){navigate(\"/\");},children:\"Exit\"})]})})]})});};export default Login;","map":{"version":3,"names":["React","useState","Button","Col","Container","Row","Form","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","navigate","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","errorMsg","setErrorMsg","sendLoginRequest","reqBody","fetch","headers","method","body","JSON","stringify","then","response","status","json","result","localStorage","setItem","token","update_token","children","className","md","lg","Group","controlId","Label","Control","type","size","placeholder","value","onChange","e","target","style","color","fontWeight","id","onClick","variant"],"sources":["/Users/jackchen/Downloads/GitHub/construction-frontend/construction/src/views/LoginView.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Button, Col, Container, Row, Form } from \"react-bootstrap\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst Login = () => {\n    const navigate = useNavigate();\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [errorMsg, setErrorMsg] = useState(null);\n  \n    function sendLoginRequest() {\n      setErrorMsg(\"\");\n      const reqBody = {\n        \"email\": username,\n        \"password\": password\n      };\n  \n      fetch(\"http://127.0.0.1:8000/api/login/\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        method: \"post\",\n        body: JSON.stringify(reqBody),\n      })\n        .then((response) => {\n          if (response.status === 200){\n            response.json().then(\n                (result) => {\n                    localStorage.setItem(\"token\",result.token)\n                    localStorage.setItem(\"update_token\",result.update_token)\n                });\n            navigate(\"/\")\n        } else if (response.status === 401 || response.status === 403) {\n            setErrorMsg(\"Invalid username or password\");\n          } else {\n            setErrorMsg(\n              \"Something went wrong, try again later or reach out to jchen72503@gmail.com\"\n            );\n          }\n        })\n    }\n\n\n    return (\n      <>\n        <Container>\n          <Row className=\"justify-content-center mt-5\">\n            <Col md=\"8\" lg=\"6\">\n              <Form.Group className=\"mb-3\" controlId=\"username\">\n                <Form.Label className=\"fs-4\">Username</Form.Label>\n                <Form.Control\n                  type=\"email\"\n                  size=\"lg\"\n                  placeholder=\"joe@gmail.com\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                />\n              </Form.Group>\n            </Col>\n          </Row>\n  \n          <Row className=\"justify-content-center\">\n            <Col md=\"8\" lg=\"6\">\n              <Form.Group className=\"mb-3\" controlId=\"password\">\n                <Form.Label className=\"fs-4\">Password</Form.Label>\n                <Form.Control\n                  type=\"password\"\n                  size=\"lg\"\n                  placeholder=\"Type in your password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                />\n              </Form.Group>\n            </Col>\n          </Row>\n          {errorMsg ? (\n            <Row className=\"justify-content-center mb-4\">\n              <Col md=\"8\" lg=\"6\">\n                <div className=\"\" style={{ color: \"red\", fontWeight: \"bold\" }}>\n                  {errorMsg}\n                </div>\n              </Col>\n            </Row>\n          ) : (\n            <></>\n          )}\n          <Row className=\"justify-content-center\">\n            <Col\n              md=\"8\"\n              lg=\"6\"\n              className=\"mt-2 d-flex flex-column gap-5 flex-md-row justify-content-md-between\"\n            >\n              <Button\n                id=\"submit\"\n                type=\"button\"\n                size=\"lg\"\n                onClick={() => sendLoginRequest()}\n              >\n                Login\n              </Button>\n              <Button\n                variant=\"secondary\"\n                type=\"button\"\n                size=\"lg\"\n                onClick={() => {\n                  navigate(\"/\");\n                }}\n              >\n                Exit\n              </Button>\n            </Col>\n          </Row>\n        </Container>\n      </>\n    );\n  };\n  \n  export default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}